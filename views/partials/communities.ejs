<% for (let i = 0; i < communities.length; i++) {
    const community = communities[i];%>
    
    <li id="community-<%= community.id %>" class="">
    <span class="icon-content">
        <img class="icon" src="../../img/icons/<%= community.id %>.jpg"></img>
    </span>

    <a data-sound="SE_WAVE_OK" href="/communities/<%= community.id %>" data-pjax=".wrapper" class="scroll to-community-button">
    <% if (community.sub_communities && community.sub_communities.length != 0) { %>
    <a data-sound="SE_WAVE_OK_SUB" href="/communities/<%= community.id %>/other" data-pjax=".wrapper" class="to-related-community-button"><%= locals.language.aqua.portal.community.other %></a>
    <% } else { %>
        <span class="community-button"></span>
    <% } %>
    </a>

    <div class="body">
        <div class="body-content <%= community.sub_communities && community.sub_communities.length !== 0 ? 'related' : '' %>">
          <span class="community-name title">
            <%= locals.local([{str : community.name, rpl : "%s"}], locals.language.aqua.portal.community.community) %>
          </span>
            <span class="community-name name">
                <%= (community.app_name) ? community.app_name : community.name %>
            </span>
            <span class="empathy-count"><span><%= community.favorite_count %></span></span>
            <span class="text">
                <% if (community.user_community == 1) { %>
                    <%= locals.language.aqua.portal.community.types.user_community %>
                <% } else {
                    if (community.type == "sub") { %>
                        <%= locals.language.aqua.portal.community.types.sub_community %>
                    <% } else {
                        switch(community.platform) {
                            case "wiiu":%>
                                <%= locals.language.aqua.portal.community.platforms.wiiu %>
                            <%break;
                            case "3ds":%>
                                <%= locals.language.aqua.portal.community.platforms.n3ds %>
                            <%break;
                            case "wii":%>
                                <%= locals.language.aqua.portal.community.platforms.wii %>
                            <%break;
                            case "topic":%>
                                <%= locals.language.aqua.portal.community.platforms.topic %>
                            <%break;
                            case "both":%>
                                <%= locals.language.aqua.portal.community.platforms['wiiu/n3ds'] %>
                            <%break;
                            case "vc":%>
                                <%= locals.language.aqua.portal.community.platforms.virtual_console %>
                            <%break;
                            default:%>
                                <%= locals.language.aqua.portal.community.platforms.topic %>
                            <%break;
                        }
                    }
                }  %>
            </span>
            <span class="favorited <%= (community.is_favorited) ? "" : "none" %>"></span>

        </div>
    </div>
</li>
<% } %> 